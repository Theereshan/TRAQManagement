<h2>Account Details</h2>

<ng-template #loadingBlock>
  <p>Loading account details...</p>
</ng-template>

<div *ngIf="account$ | async as account; else loadingBlock">

  <button (click)="back()" style="margin-bottom: 15px;">â¬… Back</button>

  <p style="color: green;">{{ message }}</p>

  <h3>Account Info</h3>
  <p><b>Account Number:</b> {{ account.accountNumber }}</p>
  <p><b>Owner:</b> {{ account.person?.firstName }} {{ account.person?.lastName }}</p>
  <p><b>Status:</b> {{ account.status?.statusName }}</p>
  <p><b>Balance:</b> {{ account.balance }}</p>

  <hr />

  <h3>Add Transaction</h3>

  <div style="margin-bottom: 15px;">
    <label>Date:</label>
    <input type="date" [(ngModel)]="transactionDate" style="margin-right: 10px;" />

    <label>Amount:</label>
    <input type="number" [(ngModel)]="transactionAmount" style="margin-right: 10px;" />

    <button (click)="createTransaction()">Submit</button>
  </div>

  <hr />

  <h3>Transactions</h3>

  <table border="1" cellpadding="8" *ngIf="transactions$ | async as transactions">
    <tr>
      <th>ID</th>
      <th>Date</th>
      <th>Amount</th>
    </tr>

    <tr *ngFor="let t of transactions">
      <td>{{ t.transactionId }}</td>
      <td>{{ t.transactionDate | date:'yyyy-MM-dd' }}</td>
      <td>{{ t.amount }}</td>
    </tr>
  </table>

</div>
